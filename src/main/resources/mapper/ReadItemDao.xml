<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.who.ReadItemDao">
	<select id="queryItem" resultType="java.util.Map" parameterType="java.util.Map">
		select * from (select rownum r,i.* from iteminfo i,openitem o ,itemarea a ,itemtype t 
		where i.item_id=o.item_id and o.item_status=1 and i.itemtype_id=t.itemtype_id and i.itemarea_id=a.itemarea_id 
		and to_date(o.endtime,'YYYY/MM/DD HH24:MI:SS')>trunc(sysdate）
		<if test="itemtypeId!=-1">
	 		and t.itemtype_id=#{itemtypeId}
 		</if>
		<if test="itemareaId!=-1">
	 		and a.itemarea_id=#{itemareaId}
 		</if>
		order by to_date(o.endtime,'YYYY/MM/DD HH24:MI:SS') asc) 
		u  where r > #{startIndex} and r &lt; #{endIndex}
		
	</select>
		<select id="queryItemCount" resultType="int" parameterType="java.util.Map">
		select count(*) from (select rownum r,i.* from iteminfo i,openitem o ,itemarea a ,itemtype t 
		where i.item_id=o.item_id and o.item_status=1 and i.itemtype_id=t.itemtype_id and i.itemarea_id=a.itemarea_id 
		and to_date(o.endtime,'YYYY/MM/DD HH24:MI:SS')>trunc(sysdate）
		<if test="itemtypeId!=-1">
	 		and t.itemtype_id=#{itemtypeId}
 		</if>
		<if test="itemareaId!=-1">
	 		and a.itemarea_id=#{itemareaId}
 		</if>
		order by to_date(o.endtime,'YYYY/MM/DD HH24:MI:SS') asc) u  
		
	</select>
</mapper>